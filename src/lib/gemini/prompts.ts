/**
 * Generate initial Saju analysis prompt (for free users)
 */
export function generateInitialAnalysisPrompt(data: {
  name: string;
  birthDate: string; // YYYY-MM-DD
  birthTime?: string; // HH:MM
  gender: 'male' | 'female';
}): string {
  const { name, birthDate, birthTime, gender } = data;

  return `
# 사주 기본 정보
- 이름: ${name}
- 생년월일: ${birthDate} (양력)
- 출생 시간: ${birthTime || '알 수 없음'}
- 성별: ${gender === 'male' ? '남성' : '여성'}

# 분석 요청
위 정보를 바탕으로 다음 형식에 맞춰 종합 사주 분석을 제공해주세요:

## 1. 기본 사주 구조
- 천간(天干)과 지지(地支) 배치
- 오행(五行) 균형 분석
- 용신(用神) 판단

## 2. 성격 및 기질
- 타고난 성격 특성 (200자 내외)
- 장점과 단점
- 대인관계 스타일

## 3. 운세 분야별 분석
각 분야를 1-100점으로 평가하고 구체적 조언 제공:

### 사업/직업운 (Career)
- 점수: [1-100]
- 적성 직종:
- 주의사항:
- 조언: (150자 내외)

### 재물운 (Wealth)
- 점수: [1-100]
- 재물 형성 방식:
- 주의사항:
- 조언: (150자 내외)

### 건강운 (Health)
- 점수: [1-100]
- 주의해야 할 신체 부위:
- 건강 관리 팁:
- 조언: (150자 내외)

### 애정/인간관계운 (Relationship)
- 점수: [1-100]
- 이성관계 특징:
- 대인관계 조언:
- 조언: (150자 내외)

## 4. 행운 요소
- 길(吉)한 방위:
- 행운의 색상:
- 행운의 숫자:
- 궁합이 좋은 띠:

## 5. 주의 및 경계 사항
- 피해야 할 행동 3가지
- 조심해야 할 시기

## 6. 종합 조언
전체적인 인생 조언을 200자 내외로 요약해주세요.

---
중요: 응답은 반드시 한국어로 작성하고, 위 형식을 정확히 따라주세요.
응답 마지막에 다음 JSON 형식도 포함해주세요:

\`\`\`json
{
  "overall_score": 75,
  "fortune_aspects": {
    "career": { "score": 80, "advice": "조언 내용" },
    "wealth": { "score": 70, "advice": "조언 내용" },
    "health": { "score": 75, "advice": "조언 내용" },
    "relationship": { "score": 80, "advice": "조언 내용" }
  },
  "lucky_elements": ["동쪽", "파란색", "3", "소띠"],
  "warnings": ["경고1", "경고2", "경고3"]
}
\`\`\`
`.trim();
}

/**
 * Generate daily fortune prompt (for paid users)
 */
export function generateDailyFortunePrompt(data: {
  name: string;
  birthDate: string;
  gender: 'male' | 'female';
  previousAnalysis?: string; // 이전 기본 분석 참조
  today: string; // YYYY-MM-DD
}): string {
  const { name, birthDate, gender, previousAnalysis, today } = data;
  const todayDate = new Date(today);
  const dayOfWeek = todayDate.toLocaleDateString('ko-KR', {
    weekday: 'long',
  });
  const year = todayDate.getFullYear();
  const month = todayDate.getMonth() + 1;

  return `
# 사용자 기본 정보
- 이름: ${name}
- 생년월일: ${birthDate}
- 성별: ${gender === 'male' ? '남성' : '여성'}
- 분석 날짜: ${today} (${dayOfWeek})
- 현재 년도: ${year}년 ${month}월

${
  previousAnalysis
    ? `
# 기본 사주 분석 (참고용)
${previousAnalysis}
`
    : ''
}

# 프리미엄 일일 운세 분석 요청

**중요: 이것은 유료 구독 서비스입니다. 무료 버전보다 훨씬 더 상세하고 깊이있는 분석을 제공해야 합니다.**

오늘(${today}, ${dayOfWeek})의 운세를 다음 형식으로 **상세하게** 작성해주세요:

## 📅 오늘의 종합 운세 (Overall Fortune)
오늘 하루의 전반적인 운세를 **200-300자**로 상세히 요약해주세요.
- 오늘의 천간(天干)과 지지(地支)를 명시
- 사용자 사주와의 상호작용 분석
- 오행(五行) 균형 상태
- 오늘의 전체 운세 점수 [1-100점]

## 🎯 세운·대운·월운 분석 (Major Fortune Cycles)
${year}년 ${month}월의 운세 흐름을 심층 분석해주세요:

### 세운 (歲運) - ${year}년 연간 운세
- 올해의 천간지지와 사용자 사주의 관계 (150-200자)
- 올해 주요 기회와 도전 과제
- 연간 운세 흐름 전망

### 대운 (大運) - 10년 주기 운세
- 현재 대운 시기 판단 (생년월일 기준 계산)
- 대운이 현재 삶에 미치는 영향 (100-150자)
- 대운에 따른 장기 전략 조언

### 월운 (月運) - ${month}월 운세
- 이번 달의 천간지지 (음력 기준)
- 월운이 오늘에 미치는 영향 (100-150자)
- 이번 달 중점 관리 사항

## ⏰ 시간대별 상세 운세 (Time-based Fortune)

### 🌅 새벽/오전 (05:00-12:00)
- 운세 점수: [1-100점]
- 오행 상태: (오행 중 어떤 기운이 강한지)
- 추천 활동:
  - 최우선 과제: (구체적으로)
  - 만나면 좋은 사람: (특징)
  - 피해야 할 상황: (구체적으로)
- 상세 조언: (150-200자)

### ☀️ 오후 (12:00-18:00)
- 운세 점수: [1-100점]
- 오행 상태:
- 추천 활동:
  - 최우선 과제: (구체적으로)
  - 만나면 좋은 사람: (특징)
  - 피해야 할 상황: (구체적으로)
- 상세 조언: (150-200자)

### 🌙 저녁/밤 (18:00-05:00)
- 운세 점수: [1-100점]
- 오행 상태:
- 추천 활동:
  - 최우선 과제: (구체적으로)
  - 만나면 좋은 사람: (특징)
  - 피해야 할 상황: (구체적으로)
- 상세 조언: (150-200자)

## 💼 분야별 심층 운세 분석 (Detailed Aspect Fortune)

### 직업운/사업운 (Career & Business)
- 점수: [1-100점]
- 오늘의 핵심 이슈: (80-100자)
- 구체적 조언:
  - 중요 업무 처리 시간대:
  - 협업 시 주의사항:
  - 의사결정 가이드:
  - 상사/동료와의 관계:
- 특별 기회: (있다면 구체적으로)
- 주의사항: (구체적으로)

### 재물운 (Wealth & Finance)
- 점수: [1-100점]
- 오늘의 핵심 이슈: (80-100자)
- 구체적 조언:
  - 수입 기회:
  - 지출 주의사항:
  - 투자 판단:
  - 재무 결정 타이밍:
- 특별 기회: (있다면 구체적으로)
- 주의사항: (구체적으로)

### 대인관계운 (Relationships)
- 점수: [1-100점]
- 오늘의 핵심 이슈: (80-100자)
- 구체적 조언:
  - 우호적인 관계:
  - 갈등 가능성:
  - 새로운 만남:
  - 소통 방식:
- 특별 기회: (있다면 구체적으로)
- 주의사항: (구체적으로)

### 건강운 (Health & Wellness)
- 점수: [1-100점]
- 오늘의 핵심 이슈: (80-100자)
- 구체적 조언:
  - 주의할 신체 부위:
  - 권장 활동:
  - 식단 조언:
  - 휴식 시간:
- 특별 기회: (있다면 구체적으로)
- 주의사항: (구체적으로)

## ✨ 오늘의 실천 사항 (Action Plan)
오늘 하루 **반드시** 실천하면 좋을 구체적인 행동을 제안해주세요:

1. **우선순위 1** (가장 중요):
   - 행동: (구체적으로, 예: "오전 9-10시에 중요한 이메일 발송")
   - 이유: (왜 이것이 중요한지)
   - 예상 효과:

2. **우선순위 2**:
   - 행동: (구체적으로)
   - 이유:
   - 예상 효과:

3. **우선순위 3**:
   - 행동: (구체적으로)
   - 이유:
   - 예상 효과:

## ⚠️ 오늘의 주의사항 (Warnings)
오늘 특별히 조심해야 할 사항을 **구체적으로** 안내해주세요:
- 경고 1: (구체적 상황과 대처법)
- 경고 2: (구체적 상황과 대처법)
- 경고 3: (구체적 상황과 대처법)

## 🍀 행운 키워드 (Lucky Elements)
오늘 하루를 이롭게 할 요소들:
- 행운의 색상: (이유 포함)
- 행운의 방향: (이유 포함)
- 행운의 숫자: (이유 포함)
- 행운의 시간대: (구체적으로)
- 행운의 음식/재료: (이유 포함)
- 긍정 키워드: (3-5개)
- 피해야 할 요소: (구체적으로)

## 🔮 사주 명리학적 해석 (Classical Analysis)
전통 사주 이론에 기반한 심층 분석:
- 일진(日辰)의 특성: (오늘의 천간지지 분석, 150-200자)
- 육십갑자 해석: (오늘의 간지 의미)
- 십이운성(十二運星): (생왕고절 등)
- 신살(神煞) 분석: (있다면)

## 💫 오늘의 명언과 조언 (Daily Wisdom)
- 오늘의 명언: (사주 철학에 맞는 명언)
- 명리학자의 조언: (200-250자로 오늘을 의미있게 보낼 수 있는 깊이있는 조언)
- 마음가짐: (오늘 유지해야 할 심리 상태)

---
**중요**:
- 응답은 반드시 한국어로 작성하고, 위 형식을 **정확히** 따라주세요.
- 각 섹션을 충실히 작성하여 유료 사용자에게 충분한 가치를 제공해주세요.
- 구체적인 시간, 상황, 행동을 제시해주세요.
- 응답 마지막에 다음 JSON 형식도 포함해주세요:

\`\`\`json
{
  "date": "${today}",
  "overall_score": 75,
  "fortune_aspects": {
    "career": { "score": 85, "advice": "상세 조언" },
    "wealth": { "score": 70, "advice": "상세 조언" },
    "health": { "score": 75, "advice": "상세 조언" },
    "relationship": { "score": 80, "advice": "상세 조언" }
  },
  "time_slots": {
    "morning": { "score": 80, "advice": "상세 조언" },
    "afternoon": { "score": 70, "advice": "상세 조언" },
    "evening": { "score": 75, "advice": "상세 조언" }
  },
  "actions": ["구체적 행동1", "구체적 행동2", "구체적 행동3"],
  "warnings": ["경고1", "경고2", "경고3"],
  "lucky_elements": ["색상", "방향", "숫자", "시간대", "음식"]
}
\`\`\`
`.trim();
}
